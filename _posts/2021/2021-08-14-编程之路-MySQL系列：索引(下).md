---
layout:     post             				# 使用的布局（不需要改）
title:        MySQL系列：索引(下)    # 标题 
subtitle:    					  				#副标题
date:       2021-10-05  					# 时间
author:     阿琦                  			# 作者
header-img: img/home-bg-o.jpg 	#这篇文章标题背景图片
catalog: true                        	# 是否归档
istop:  false                             # 是否置顶
iscopyright: true                      # 是否版权，默认有
music-id:                                        # 网易云音乐单曲嵌入
music-idfull:                               # 网易云音乐歌单嵌入
apserver:                           # 音乐平台netease/tencent/kugou/xiami/baidu
aptype:     	           		# 音乐类型song/playlist/album/search/artist
apsongid:                    # 音乐song/playlist/album id
tags:                              	           	#标签
    - 自我总结
    - DB
---

&nbsp;
&nbsp;

<section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; counter-reset: counterh1 counterh2 counterh3;"><h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">1</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">前言</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">上一篇：<a href="https://mp.weixin.qq.com/s/qZw_HcVTOsL-bK8MTS7VZA" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(37,132,181); border-bottom: 1px solid rgb(37,132,181);">MySQL系列：索引(上)</a></p>
<ul data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">回表</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">覆盖索引</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">降序索引</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">最左前缀原则</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">解决 docker mysql 不能输入中文问题</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">其它版本 MySQL 联合索引</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">索引下推</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">索引尽量不要做修改操作</section></li></ul>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">2</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">继续</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">init</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">[2021-09-04&nbsp;15:21:55]&nbsp;Connected<br>&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">use</span>&nbsp;aaaqi<br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">15</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">21</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">55</span>]&nbsp;completed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">70</span>&nbsp;ms<br>aaaqi&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">create</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">table</span>&nbsp;aaaqi_demo5&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">id</span>&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>&nbsp;primary&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">key</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">NOT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">varchar</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">16</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">NOT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">''</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">index</span>&nbsp;k(k))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">engine</span>=<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">InnoDB</span><br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">15</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">22</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">57</span>]&nbsp;completed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">115</span>&nbsp;ms<br>aaaqi&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">insert</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">into</span>&nbsp;aaaqi_demo5&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">values</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">100</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">1</span>,&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">'aa'</span>),(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">200</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">'bb'</span>),(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">300</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">3</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">'cc'</span>),(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">500</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">5</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">'ee'</span>),(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">600</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">'ff'</span>),(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">700</span>,<span class="hljs-number" style="color: #d19a66; line-height: 26px;">7</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">'gg'</span>)<br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">15</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">22</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">57</span>]&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">rows</span>&nbsp;affected&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">75</span>&nbsp;ms<br><br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">如果执行</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo5&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;k&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">between</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">3</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">5</span>;<br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">需要执行几次树的搜索操作，会扫描多少行？</p>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gtvml4kqdlj60w60egtam02.jpg" alt="InnoDB的索引组织结构" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">InnoDB的索引组织结构</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这条 sql 查询语句的执行流程：</p>
<ol data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">在 k 索引树上找到 k = 3 的记录，取得 id = 300；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">再到 id 索引树查到 id = 300 对应的 R3；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">在 k 索引树取下一个值 k = 5，取得 id = 500；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">再回到 id 索引树查到 id = 500 对应的 R4；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;">在 k 索引树取下一个值 k = 6，不满足条件，循环结束</section></li></ol>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这个过程中，<strong style="font-weight: bold; color: rgb(37,132,181);">回到主键索引树搜索的过程，叫回表</strong>。可以看到这个查询过程读了 k 索引树的 3 条记录（步骤 1、3、5），回表了 2 次（步骤 2、步骤 4）。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这个栗子中，由于查询结果所需要的数据只在主键索引上有，所以必须回表，不过这个是可以进行索引优化从而避免回表过程的。</p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">3</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">覆盖索引</span><span class="suffix"></span></h2>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">id</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo5&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;k&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">between</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">3</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">5</span>;<br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这条 sql 只查询 id 的值，而 id 的值已经在索引树了，所以不需要回表。也就是说，这个查询里面的索引 k 已经<strong style="font-weight: bold; color: rgb(37,132,181);">覆盖了</strong> 查询需求，这个称为 <strong style="font-weight: bold; color: rgb(37,132,181);">覆盖索引</strong> 。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">那个绿色的就是覆盖索引：
<img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/ZBd19A.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;"><strong style="font-weight: bold; color: rgb(37,132,181);">覆盖索引 可以减少树的搜索次数，显著的提升查询性能，所以这是一个常用的性能优化手段</strong>。</p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">4</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">降序索引</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">MySQL 8.0 的新特性，主要用来解决多列排序可能无法使用索引的问题，从而可以覆盖更多的应用场景。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">栗子 init：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">aaaqi&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">CREATE</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">TABLE</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`aaaqi_demo6`</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`id`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">11</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">NOT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`name`</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">varchar</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">32</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">11</span>)&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PRIMARY&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">KEY</span>&nbsp;(<span class="hljs-string" style="color: #98c379; line-height: 26px;">`id`</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">KEY</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>&nbsp;(<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">ENGINE</span>&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">InnoDB</span><br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">18</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">22</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">55</span>]&nbsp;[HY000][<span class="hljs-number" style="color: #d19a66; line-height: 26px;">1681</span>]&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">Integer</span>&nbsp;display&nbsp;width&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">is</span>&nbsp;deprecated&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;will&nbsp;be&nbsp;removed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;a&nbsp;future&nbsp;release.<br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">18</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">22</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">55</span>]&nbsp;[HY000][<span class="hljs-number" style="color: #d19a66; line-height: 26px;">1681</span>]&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">Integer</span>&nbsp;display&nbsp;width&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">is</span>&nbsp;deprecated&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;will&nbsp;be&nbsp;removed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;a&nbsp;future&nbsp;release.<br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">18</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">22</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">55</span>]&nbsp;completed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">102</span>&nbsp;ms<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/BdCMZS.png" alt="去掉警告" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">去掉警告</figcaption></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/ZD1wMo.png" alt="默认升序" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">默认升序</figcaption></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/WNpAlW.png" alt="看Extra" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">看Extra</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">如果是降序的话，无法使用索引，虽然可以相反顺序扫描，但性能会受到影响。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">创建索引：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">aaaqi&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">alter</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">table</span>&nbsp;aaaqi.aaaqi_demo6&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">add</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">index</span>&nbsp;age_desc(age&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">desc</span>)<br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">18</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">33</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">24</span>]&nbsp;completed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">79</span>&nbsp;ms<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/vAacNm.png" alt="创建降序索引" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">创建降序索引</figcaption></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/fqatCC.png" alt="Using filesort" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">Using filesort</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">创建降序索引后出现了<strong style="font-weight: bold; color: rgb(37,132,181);">Using filesort</strong> ...</p>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/mysql05-2.gif" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/eyimS0.png" alt="官网ORDER BY" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">官网ORDER BY</figcaption></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/d6ZvRw.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/DQOLLa.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">5</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">最左前缀原则</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">合理设计索引可以减少索引个数，B+树这种索引结构，可以利用索引的<strong style="font-weight: bold; color: rgb(37,132,181);">最左前缀</strong> 来定位记录。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">栗子，假设 用(name,age)这个联合索引来分析。</p>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/nvWA6Z.png" alt="name,age索引示意图" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">name,age索引示意图</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">当查询所有名字是<strong style="font-weight: bold; color: rgb(37,132,181);">阿琦</strong> 的人时，可以快速定位到 id4，然后向后遍历得到所有所需的结果。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">如果查询所有名字的第一个字<strong style="font-weight: bold; color: rgb(37,132,181);">阿</strong> 的人</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo6&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">like</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿%'</span>;<br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这时，也能够用上这个索引，查到第一个符合条件的记录是 id4，然后 向后遍历，直到不满足条件为止。</p>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/DkxNZj.png" alt="也会使用索引" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">也会使用索引</figcaption></figure>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">6</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">解决 docker mysql 不能输入中文问题</span><span class="suffix"></span></h2>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/fG1cRL.png" alt="解决 docker mysql 不能输入中文问题" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">解决 docker mysql 不能输入中文问题</figcaption></figure>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">7</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">联合索引</span><span class="suffix"></span></h2>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">aaaqi&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">CREATE</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">TABLE</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`aaaqi_demo7`</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`id`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">NOT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`name`</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">varchar</span>(<span class="hljs-number" style="color: #d19a66; line-height: 26px;">32</span>)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`number`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">DEFAULT</span>&nbsp;<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">NULL</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PRIMARY&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">KEY</span>&nbsp;(<span class="hljs-string" style="color: #98c379; line-height: 26px;">`id`</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">KEY</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>&nbsp;(<span class="hljs-string" style="color: #98c379; line-height: 26px;">`name`</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">`age`</span>,<span class="hljs-string" style="color: #98c379; line-height: 26px;">`number`</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">ENGINE</span>&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">InnoDB</span><br>[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">2021</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-09</span><span class="hljs-number" style="color: #d19a66; line-height: 26px;">-04</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">20</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">26</span>:<span class="hljs-number" style="color: #d19a66; line-height: 26px;">57</span>]&nbsp;completed&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">in</span>&nbsp;<span class="hljs-number" style="color: #d19a66; line-height: 26px;">87</span>&nbsp;ms<br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">上面 <strong style="font-weight: bold; color: rgb(37,132,181);">KEY age</strong>  害，直接拷贝的 <strong style="font-weight: bold; color: rgb(37,132,181);">aaaqi_demo6 表结构</strong></p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">注意截图里面的 <strong style="font-weight: bold; color: rgb(37,132,181);">KEY age</strong> 索引名。</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿琦'</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">number</span>=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/CtPGZC.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">like</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿%'</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">number</span>=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/s0JS7t.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿琦'</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/rEG5Ux.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">in&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿琦'</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/EqpaW1.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">number</span>=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/Uehrz1.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;">mysql&gt;&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">explain</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-built_in" style="color: #e6c07b; line-height: 26px;">number</span>=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">6</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/U8Ke62.png" alt style="display: block; margin: 0 auto; max-width: 100%;"></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/7gSytm.png" alt="索引名是 age ，懒得改了" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">索引名是 age ，懒得改了</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">看到了吧，怎么写都是使用索引了的。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">MySQL版本号 - Server version: 8.0.23 MySQL Community Server - GPL</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">官网描述：<a href="https://dev.mysql.com/doc/refman/8.0/en/index-merge-optimization.html" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(37,132,181); border-bottom: 1px solid rgb(37,132,181);">https://dev.mysql.com/doc/refman/8.0/en/index-merge-optimization.html</a></p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">8</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">其它版本 MySQL 联合索引</span><span class="suffix"></span></h2>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;a=?&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;b=?&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;c=?；查询效率最高，索引全覆盖。<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;a=?&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;b=?；索引覆盖a和b。<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;b=?&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;a=?；经过mysql的查询分析器的优化，索引覆盖a和b。<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;a=?；索引覆盖a。<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;b=?&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;c=?；没有a列，不走索引，索引失效。<br><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">test</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;c=?；没有a列，不走索引，索引失效。<br></code></pre>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">这个应该是 5.6、5.7版本的 MySQL，具体版本不详，懒得再弄个低版本的 MySQL 去测试了，网上基本都是这样。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">那么问题来了，8.0.X 和 5.X 版本不一样，面试官问联合索引相关的问题得注意了。</p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">9</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">索引下推</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">假设 名字第一个字是阿，而且年龄是 10 岁的所有人：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span>&nbsp;aaaqi.aaaqi_demo7&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">where</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">name</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">like</span>&nbsp;<span class="hljs-string" style="color: #98c379; line-height: 26px;">'阿%'</span>&nbsp;<span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">and</span>&nbsp;age=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">10</span>;<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/i5d4Iq.png" alt="01 无索引下推执行流程" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">01 无索引下推执行流程</figcaption></figure>
<figure data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"><img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/slb0Zx.png" alt="02 索引下推执行流程" style="display: block; margin: 0 auto; max-width: 100%;"><figcaption style="margin-top: 5px; text-align: center; color: #888; font-size: 14px;">02 索引下推执行流程</figcaption></figure>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">在两个图里面，每一个虚线箭头表示回表一次。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">图 01 中, <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;">name,age</code> 索引里面去掉了 age 的值，这个过程 InnoDB 并不会去看 age 的值，只是按顺序把“name 第一个字是<strong style="font-weight: bold; color: rgb(37,132,181);">阿</strong>”的记录一条条取出来回表。因此，需要回表 4 次。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">图 01 、图 02 的区别是，InnoDB 在 <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;">name,age</code> 索引内部就判断了 age 是否等于 10，对于不等于 10 的记录，直接判断并跳过。在这个例子中，只需要对 id104、id105 这两条记录回表取数据判断，就只需要回表 2 次。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">MySQL 8.0 索引下推 这个也做了优化，详情见官网：<a href="https://dev.mysql.com/doc/refman/8.0/en/index-condition-pushdown-optimization.html" style="text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(37,132,181); border-bottom: 1px solid rgb(37,132,181);">https://dev.mysql.com/doc/refman/8.0/en/index-condition-pushdown-optimization.html</a></p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;"><span class="prefix" style="display: inline-block;"><span style="counter-increment: counterh2; color: rgb(159,205,208); border-bottom: 4px solid rgb(159,205,208); font-size: 18px; padding: 2px 4px;">10</span></span><span class="content" style="font-size: 18px; border-bottom: 4px solid rgb(37,132,181); padding: 2px 4px; color: rgb(37,132,181);">索引尽量不要做修改操作</span><span class="suffix"></span></h2>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">因为索引可能因为删除，或者页分裂等原因，导致数据页有空洞，重建索引的过程会创建一个新的索引，把数据按顺序插入，这样页面的利用率最高，也就是索引更紧凑、更省空间。</p>
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">主键就别瞎搞了，不论是删除主键还是创建主键，都会将整个表重建。</p>
<hr data-tool="mdnice编辑器" style="height: 1px; margin: 0; margin-top: 10px; margin-bottom: 10px; border: none; border-top: 1px solid rgb(37,132,181);">
<p data-tool="mdnice编辑器" style="font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;">从下午 14 左右一直淦到 21：40，完事估计 22：00 点多了... .
<img src="https://ian-upic.oss-cn-hangzhou.aliyuncs.com/uPic/IMG_4428.JPG" alt style="display: block; margin: 0 auto; max-width: 100%;"></p>
</section>